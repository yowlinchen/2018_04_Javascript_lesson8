<!DOCTYPE html>
<html lang="en">

<head>
    <title>Sound Effects</title>
    <script>
        // Put all the global variables in ga
        var ga = {

        };
        window.addEventListener("load", function () {

        });

        ga.loadSounds = function () {
            for (var name in sounds) {
                loadSound(name, sounds[name]);
            }
        }

        // var snare;
        ga.loadSound = function (name, src) {
            var req = new XMLHttpRequest();
            req.responseType = "arraybuffer";
            req.open("get", src);
            req.onload = function () {
                // console.log(req.response);
                // Transfer ArrayBuffer to AudioBuffer and save it
                audio.decodeAudioData(req.response, function (buffer) {
                    sounds[name] = buffer;
                    // console.log(snare);
                });
            };
            req.send();
        }

        ga.playSound = function (buffer, time) {
            var source = audio.createBufferSource();
            source.buffer = buffer; // where source is coming from
            // Create gainnode
            // var gain = audio.createGain();
            // connect & play
            // source.connect(gain);
            source.connect(audio.destination); // next box
            source.start(time); // play
        }
    </script>
</head>

<body>
</body>

</html>